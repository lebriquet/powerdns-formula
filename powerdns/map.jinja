{% set powerdns = salt['pillar.get']('powerdns', {
    'lookup': salt['grains.filter_by']({
        'Debian': {
            'pkg': 'pdns-server',
            'version': '4.2.1',
            'config_file': '/etc/powerdns/pdns.conf',
            'service': 'pdns',
            'backend_geoip_pkg': 'pdns-backend-geoip',
            'backend_ldap_pkg': 'pdns-backend-ldap',
            'backend_lua_pkg': 'pdns-backend-lua',
            'backend_mydns_pkg': 'pdns-backend-mydns',
            'backend_mysql_pkg': 'pdns-backend-mysql',
            'backend_odbc_pkg': 'pdns-backend-odbc',
            'backend_opendbx_pkg': 'pdns-backend-opendbx',
            'backend_pgsql_pkg': 'pdns-backend-pgsql',
            'backend_pipe_pkg': 'pdns-backend-pipe',
            'backend_remote_pkg': 'pdns-backend-remote',
            'backend_sqlite3_pkg': 'pdns-backend-sqlite3',
        },
        'RedHat': {
            'pkg': 'pdns',
            'version': '4.2.1',
            'config_file': '/etc/pdns/pdns.conf',
            'service': 'pdns',
            'backend_geoip_pkg': 'pdns-backend-geoip',
            'backend_ldap_pkg': 'pdns-backend-ldap',
            'backend_lua_pkg': 'pdns-backend-lua',
            'backend_mydns_pkg': 'pdns-backend-mydns',
            'backend_mysql_pkg': 'pdns-backend-mysql',
            'backend_odbc_pkg': 'pdns-backend-odbc',
            'backend_opendbx_pkg': 'pdns-backend-opendbx',
            'backend_pgsql_pkg': 'pdns-backend-pgsql',
            'backend_pipe_pkg': 'pdns-backend-pipe',
            'backend_remote_pkg': 'pdns-backend-remote',
            'backend_sqlite3_pkg': 'pdns-backend-sqlite',
        },
        'Suse': {
            'pkg': 'pdns',
            'version': '4.2.1',
            'config_file': '/etc/pdns/pdns.conf',
            'service': 'pdns',
            'backend_geoip_pkg': 'pdns-backend-geoip',
            'backend_ldap_pkg': 'pdns-backend-ldap',
            'backend_lua_pkg': 'pdns-backend-lua',
            'backend_mydns_pkg': 'pdns-backend-mydns',
            'backend_mysql_pkg': 'pdns-backend-mysql',
            'backend_odbc_pkg': 'pdns-backend-odbc',
            'backend_opendbx_pkg': 'pdns-backend-opendbx',
            'backend_pgsql_pkg': 'pdns-backend-pgsql',
            'backend_pipe_pkg': 'pdns-backend-pipe',
            'backend_remote_pkg': 'pdns-backend-remote',
            'backend_sqlite3_pkg': 'pdns-backend-sqlite3',
        },
    }),
    'config': salt['grains.filter_by']({
        'Debian': {
            'config-dir': '/etc/powerdns',
            'setgid': 'pdns',
            'setuid': 'pdns',
            'launch': '',
        },
        'RedHat': {
            'daemon': 'no',
            'guardian': 'no',
            'setgid': 'pdns',
            'setuid': 'pdns',
            'launch': '',
        },
    }),
    'repo': {
        'release': '42',
        'keyid': '1B0C6205FD380FBB',
    },
}, merge=True) %}

{% set pdns_recursor = salt['pillar.get']('powerdns-recursor', {
       'lookup': salt['grains.filter_by']({
        'Debian': { 
            'pkg': 'pdns-recursor',
            'version': '4.3.0',
            'config_file': '/etc/pdns-recursor/recursor.conf',
            'service': 'pdns-recursor',
         },
        'RedHat': {
            'pkg': 'pdns-recursor',
            'version': '4.3.0',
            'config_file': '/etc/pdns-recursor/recursor.conf',
            'service': 'pdns-recursor',
         },
    }),
    'config': salt['grains.filter_by']({
        'Debian': {
            'config-dir': '/etc/pdns-recursor',
            'setgid': 'pdns-recursor',
            'setuid': 'pdns-recursor',
        },
        'RedHat': {
            'daemon': 'no',
            'setgid': 'pdns-recursor',
            'setuid': 'pdns-recursor',
        },
    }),
    'repo': {
        'release': '43',
        'keyid': '1B0C6205FD380FBB',
    },
}, merge=True) %}

